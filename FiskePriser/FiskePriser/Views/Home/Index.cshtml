
@{
    ViewBag.Title = "Index";
}
@using System.Text
@using System.Web.Razor
@using System.Web.Script.Serialization
@using MoreLinq
@using Newtonsoft.Json
@model FiskePriser.Models.GraphArray


<h2>Index</h2>

<div id="myChart2" style="height: 100%; width: 100%; position: relative;"></div>

<script>

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

        var tst = [
            [
                "Havn", "Minimum pris", { role: 'tooltip' }, "Maximum pris", { role: 'tooltip' }
            ],
            @foreach (var graphNumber in Model.GraphNumbers)
            {
                var aa = graphNumber.Name.Replace("ø", "\\u00F8");
                var diff = graphNumber.Value - ( graphNumber.Value2 -  graphNumber.Value);
                var diff2 = diff/100;
                var min = graphNumber.Value/100;
                var minStr = min.ToString("N0").Replace(",", ".").Replace(".", "");
                var diffTool = diff2 + min;
                var diffToolStr = diffTool.ToString("N0").Replace(",",".").Replace(".","");
                @:['@aa',@(min),@(minStr),@(diff2),@(diffToolStr)],
            }
        ];

        var data = google.visualization.arrayToDataTable(tst);

        var options = {
            height: 400,
            legend: { position: 'top', maxLines: 3 },
            bar: { groupWidth: '75%' },
            isStacked: true,
            colors: ['#0206D6', '#7375FF']
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('myChart2'));
        chart.draw(data, options);
    }
</script>