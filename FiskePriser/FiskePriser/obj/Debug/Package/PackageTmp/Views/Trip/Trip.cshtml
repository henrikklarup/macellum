@{
    Layout = null;
}
@using FiskePriser.Models
@using Newtonsoft.Json
@using System.Web.UI.WebControls
@model FiskePriser.Models.Trip
<h2>MyTrip</h2>

@using (Ajax.BeginForm("AddFish", "Trip", new AjaxOptions { UpdateTargetId = "AllPage", InsertionMode = InsertionMode.Replace }))
{
    <div style="visibility: hidden">
        @{
    var mmm = JsonConvert.SerializeObject(Model.Fangst);
        }
        @Html.TextBoxFor(model => model.CurFangst, new { @Value = mmm })
    </div>

    @Html.Label("Sort: ")
    <br>
    @Html.TextBoxFor(model => model.CurFishSort, new { @Value = "2", @type = "Numeric" })
    <br>
    @Html.Label("Mængde (kg): ")
    <br>
    @Html.TextBoxFor(model => model.CurFishAmount, new { @Value = "200", @type = "Numeric" })
    <br>
    @Html.Label("Type: ")
    <br>
    @Html.DropDownListFor(model => model.CurFishId, new SelectList(Model.AlleArters, "Id", "Navn"))
    <br>
    <br>
    <input class="button" id="Add" type="submit" value="Add" />
}

<div id="FishList">
    @Html.Partial("FishListPartial", Model)
</div>

@using (Html.BeginForm("SaveFishes", "Trip"))
{

    <div style="visibility: hidden">
        @{
            var mmm = JsonConvert.SerializeObject(Model.Fangst);
        }
        @Html.TextBoxFor(model => model.CurFangst, new { @Value = mmm })
    </div>
    
    <input class="button" id="Gem" type="submit" value="Gem" />
    <input class="button" id="Slet" type="submit" value="Slet" />
}

<div id="say_it">FISK</div>

<div id="FishDialog">
    @Html.Partial("FishListSelect", Model.AlleArters)
</div>

<script>
    $(document).ready(function () {
        $("#FishDialog").dialog({
            autoOpen: false,
            height: "auto",
            width: "auto",
            title: "Vælg fiskeart",
            resizable: false,
            modal: true,
            draggable: false
    });
        $("#say_it").click(function () {
            $("#FishDialog").dialog("open");
        });
    });
</script>